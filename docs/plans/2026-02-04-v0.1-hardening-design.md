# v0.1 Hardening Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Finalize patchwaste v0.1 as a usable PoC with complete E2E docs, automation fixture data, release checklist, and robust CI/pre-commit checks.

**Architecture:** Keep runtime behavior minimal and stable. Add supporting artifacts around it: fixture input for automation, documentation for operation/release, and guardrails in local hooks + CI. Validate through targeted tests first, then full workspace checks.

**Tech Stack:** Rust workspace, cargo, GitHub Actions, pre-commit framework, markdown docs.

### Task 1: Add tests first for new behavior

**Files:**
- Modify: `crates/core/tests/analyze_fixture.rs`

1. Add failing test validating new automation dummy fixture parses and yields expected `new_bytes`/`changed_content_bytes`.
2. Run targeted test to confirm fail.
3. Implement fixture file.
4. Re-run targeted test to pass.

### Task 2: Add dummy automation fixture

**Files:**
- Create: `fixtures/automation_dummy/BuildOutput/steampipe_preview.log`

1. Add deterministic counters and offender lines for CI/testing docs.
2. Keep format aligned with parser regex.

### Task 3: Consolidate and expand docs

**Files:**
- Modify: `README.md`
- Modify: `docs/development.md`
- Create: `docs/release-v0.1.md`
- Create: `docs/proprietary-deployment.md`

1. Add full E2E example flow in README (baseline + compare + expected outputs).
2. Add automation section in development docs using dummy fixture.
3. Add release checklist doc (tagging, verification, rollback notes).
4. Add proprietary storage/payments guidance doc.

### Task 4: Pre-commit + CI guardrails

**Files:**
- Create: `.pre-commit-config.yaml`
- Create: `.githooks/pre-commit`
- Modify: `.github/workflows/ci.yml`

1. Add local pre-commit checks (`fmt`, `clippy`, `test`).
2. Add repo hook script for teams not using pre-commit python package.
3. Fix CI workflow formatting/structure and keep checks aligned with local.

### Task 5: Verify

**Commands:**
- `cargo fmt --all -- --check`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace --all-targets`

### Task 6: Final report

1. Summarize v0.1 readiness.
2. Provide explicit recommendation for proprietary + payments rollout path.
